<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Filtrage CO₂ par pays</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      margin: 20px;
    }

    h1, h2 {
      text-align: center;
    }

    .filtre {
      text-align: center;
      margin-bottom: 20px;
    }

    input[type="number"] {
      padding: 5px;
      margin: 0 10px;
      width: 80px;
    }

    button {
      padding: 5px 15px;
    }

    table {
      margin: auto;
      border-collapse: collapse;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }

    img {
      vertical-align: middle;
      margin-right: 5px;
    }
  </style>
  <script>
    let data = {
      polluant: "CO₂",
      unite: "milliards de tonnes",
      annee: 2017,
      pays: [
        { nom: "Chine", valeur: 9.26, pourcentage: 28.2, code: "cn" },
        { nom: "États-Unis", valeur: 4.76, pourcentage: 14.5, code: "us" },
        { nom: "Inde", valeur: 2.16, pourcentage: 6.6, code: "in" },
        { nom: "Russie", valeur: 1.54, pourcentage: 4.7, code: "ru" },
        { nom: "Japon", valeur: 1.13, pourcentage: 3.4, code: "jp" },
        { nom: "Allemagne", valeur: 0.72, pourcentage: 2.2, code: "de" },
        { nom: "Corée du Sud", valeur: 0.6, pourcentage: 1.8, code: "kr" },
        { nom: "Iran", valeur: 0.57, pourcentage: 1.7, code: "ir" },
        { nom: "Canada", valeur: 0.55, pourcentage: 1.7, code: "ca" }
      ]
    };

    function afficherTableau(min, max) {
      const tbody = document.getElementById("corps");
      tbody.innerHTML = "";

      for (let pays of data.pays) {
        if (pays.valeur >= min && pays.valeur <= max) {
          const ligne = document.createElement("tr");

          const celluleNom = document.createElement("td");
          celluleNom.innerHTML = `<img src="https://flagcdn.com/24x18/${pays.code}.png" alt="${pays.nom}"> ${pays.nom}`;
          ligne.appendChild(celluleNom);

          const celluleValeur = document.createElement("td");
          celluleValeur.textContent = pays.valeur;
          ligne.appendChild(celluleValeur);

          const cellulePourcentage = document.createElement("td");
          cellulePourcentage.textContent = pays.pourcentage + " %";
          ligne.appendChild(cellulePourcentage);

          tbody.appendChild(ligne);
        }
      }
    }

    function validerFiltre() {
      let min = parseFloat(document.getElementById("min").value);
      let max = parseFloat(document.getElementById("max").value);

      if (isNaN(min)) min = 0;
      if (isNaN(max)) max = Number.MAX_VALUE;

      if (min < 0 || max < 0) {
        alert("Veuillez saisir des valeurs positives.");
        return;
      }

      if (min > max) {
        alert("MIN doit être inférieur ou égal à MAX.");
        return;
      }

      afficherTableau(min, max);
    }

    window.onload = function () {
      document.getElementById("titre").textContent = `${data.polluant} (${data.unite})`;
      document.getElementById("annee").textContent = `Année : ${data.annee}`;
      afficherTableau(0, Number.MAX_VALUE); // Affiche tout au départ
    };
  </script>
</head>
<body>
<h1 id="titre"></h1>
<h2 id="annee"></h2>

<div class="filtre">
  <label for="min">Minimum :</label>
  <input type="number" id="min" placeholder="Ex: 1">
  <label for="max">Maximum :</label>
  <input type="number" id="max" placeholder="Ex: 5">
  <button onclick="validerFiltre()">Valider</button>
</div>

<table>
  <thead>
  <tr>
    <th>Nom</th>
    <th>Valeur</th>
    <th>%</th>
  </tr>
  </thead>
  <tbody id="corps"></tbody>
</table>
</body>
</html>
